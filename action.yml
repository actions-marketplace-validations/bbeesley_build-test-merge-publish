name: build-test-merge-publish
author: Bill Beesley <bill@beesley.dev>
description: GitHub Actions workflow to build & test npm packages
inputs:
  installCommand:
    description: Command to install package dependencies
    required: false
    default: npm ci
  buildCommand:
    description: Command to run to build the package
    required: false
  publishCommand:
    description: Command to publish the package
    required: false
    default: npm run release
  mainBranch:
    description: Branch to release from
    required: false
    default: 'main'
  cachePaths:
    description: Comma separated list of paths to cache
    required: false
runs:
  using: 'node12'
  pre: 'dist/pre.js'
  main: 'dist/main.js'
  post: 'dist/post.js'